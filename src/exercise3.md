# Логи

**Лог**— это текстовый файл, куда автоматически записывается важная информация о работе системы или программы. Чаще всего говорят о логах сервера. Их записывает программное обеспечение, которое управляет внутренней частью сайта или онлайн-системы.  
**Лог-файл** — своеобразный журнал событий.  
В логи записываются сведения об ошибках, действиях пользователей и других событиях, которые происходят на сервере или в системе. Разработчики и инженеры пользуются ими при отладке или при проверке, как работает программное обеспечение.
**Для чего нужны логи?**  

- **Устранение неполадок**. По логам можно понять, когда и из-за чего в работе системы возник сбой. А когда станет понятна причина, устранить его будет легче.  
- **Контроль работы**. Логи позволяют лучше отслеживать процессы, делать прогнозы на будущее и в целом контролировать работу сервера. По ним понятно, нормально ли работает система, что нужно доработать, какая у сайта посещаемость и так далее.  
- **Проверка стабильности**. Даже если с системой все хорошо, рекомендуется периодически проверять ее логи. Так можно на ранних этапах найти уязвимость или недочет — еще до того, как он станет проблемой.  
- **Выявление злоумышленников**. Вирус или взлом можно обнаружить по логам. Они фиксируют любые действия пользователей или программ в системе, поэтому по ним специалист может отследить подозрительную активность.  
- **Маркетинг**. Логи — источник ценной информации для развития сайта. Они позволяют собрать статистику по посещаемости с «сырыми» техническими данными. Например, понять, откуда приходят пользователи, где они находятся и какими устройствами пользуются для визита.  

## Уровни логирования

Для упрощения поиска и чтения логов их делят на уровни. Основных четыре:  

1. **Debug** — запись масштабных переходов состояний, например, обращение к базе данных, старт/пауза сервиса, успешная обработка записи и пр.  
2. **Warning** — нештатная ситуация, потенциальная проблема, может быть странный формат запроса или некорректный параметр вызова.  
3. **Error** — типичная ошибка.  
4. **Fatal** — тотальный сбой работоспособности, когда нет доступа к базе данных или сети, сервису не хватает места на жестком диске.  

Дополнительно файл логирования может расширяться записями еще двух уровней:  
5. **Trace**  — пошаговые записи процесса. Полезен, когда сложно локализовать ошибку.  
6. **Info** — общая информация о работе службы или сервиса.  
Работа с уровнями логирования регламентируется методическими документами и внутренними правилами организации. В них может определяться соответствие источника сообщения уровню логирования, значимость, порядок обработки каждого уровня и другие параметры.  

## Типы логов

Для удобства обработки логов их делят на типы:  

- **системные** - связаны с системными событиями  
- **серверные** - отвечают за процесс обращения к серверу  
- **почтовые** - работают с отправлениями  
- **логи баз данных** - отражают процессы обращения к базам данных  
- **авторизационные и аутентификационные** - отвечают за процесс входа, выхода из системы, восстановление доступа и пр.  

У каждого типа логов свой журнал записи. Для проверки логов авторизации нужно идти в журнал доступов, чтобы проверить загрузку системы — в журнал dmesg, за данными о запросах пользователей — в access_log. Когда одни логи пишутся отдельно от других, проще диагностировать ситуацию и найти источник проблемы.  

Еще существует разделение логов в порядке их значимости для ситуационной ошибки:  

- **Fatal error** - Срочное исправление  
- **Not critical error** - Ошибки, не влияющие на пользователя  
- **Warning** - События, требующие внимания  
- **Initial information** - Информация о вызовах сервера  

При любом механизме записи событий их объем все равно будет большим. И работать с таким количеством информации будет достаточно сложно. Поэтому логи структурируют по уровням.

## Какое расширение имеет файл с логами?

Лог-файлы имеют расширение log.  
Как правило, они представляют собой текстовые файлы в кодировке ASCII, которые содержат информацию о запущенных или используемых программ, а также временные метки. Если файл LOG используется операционной системой или программой, его в этот момент можно открыть только той программой, которая позволяет открыть его только для чтения. Кроме того, во время использования такие файлы не могут быть удалены или перемещены в другой каталог.

**Просматривать логи можно:**

**Вручную:**

**В Windows:**  

- NotePad++ text  
- PSPad  
- Adobe ExtendScript  
- Microsoft Windows NotePad  
- Pro/Engineer  
- Total Commander  
- Text editor  
- Любой другой текстовый редактор  

**В Mac OS:**  

- Apple Console  
- Apple TextEdit  
- Text editor  
- Любой другой текстовый редактор  

**В Linux:**

- gedit  

**С помощью анализатора.**
Второй вариант — не просматривать лог вручную, а воспользоваться специальной программой-анализатором. Она парсит лог-файл — «разбирает» его на составляющие и представляет в удобном для пользователя виде. Так информация показывается в виде понятного отчета, иногда с графиками и диаграммами.  
Анализаторы бывают разными, например Weblog Expert, Analog и пр. Некоторые из них также умеют интегрироваться с сервисами для сбора статистики, чтобы показывать более полную картинку.  
